
## 配置项目文件 (.pro)
在 Qt 项目中，使用 .pro 文件可以定义翻译相关的配置。在这里，你需要在 .pro 文件中添加 TRANSLATIONS 变量来声明翻译文件（通常为 .ts 文件）。当然命名方式可以为你的项目名称加上.pro的后缀即可。

示例 .pro 文件内容：
```asciidoc
SOURCES += app/view/main_window.py \
        app/view/setting_interface.py \
        app/view/home_interface.py \
        app/view/func_interface.py \
        app/components/info_card.py \

TRANSLATIONS += app/resource/i18n/app.zh_CN.ts \
                app/resource/i18n/app.zh_HK.ts

```



## 在代码中使用 tr() 函数
在你的 PyQt 应用中，所有需要翻译的字符串都应该通过 {% p red, self.tr() %} 函数来包裹。对于 Python 项目，通常在类中调用 self.tr("需要翻译的内容")。
```asciidoc
from PyQt5.QtWidgets import QLabel
class MainWindow(QtWidgets.QMainWindow):
    def __init__(self):
        super(MainWindow, self).__init__()
        self.setWindowTitle(self.tr("我的国际化程序"))
        self.label = QLabel(self.tr("欢迎使用国际化功能"))
        self.setCentralWidget(label)

if __name__ == '__main__':
    import sys
    app = QtWidgets.QApplication(sys.argv)
    window = MainWindow()
    window.show()
    sys.exit(app.exec_())
```

## pyqtrcc5

```bash
pyrcc5
$PyInterpreterDirectory$/pyrcc5
-o $FileNameWithoutExtension$.py $FileName$
$FileDir$
```

## 使用外部工具 lupdate 和 lrelease

Qt 提供两个外部工具用于国际化流程：

lupdate：扫描项目代码和 .pro 文件，提取 tr() 函数标记的所有待翻译文本，并生成或更新 .ts 文件。

```bash
pylupdate5 -noobsolete .\main.pro  
```
lrelease：将 .ts 文件编译成二进制的 .qm 文件，供运行时加载使用。

```bash
 .\lrelease.exe .\i18n\app.zh_CN.ts .\i18n\app.zh_CN.qm
 .\lrelease.exe .\i18n\app.zh_HK.ts .\i18n\app.zh_HK.qm
```
当翻译内容已经被self.tr()包裹后，可以调用lupdate程序先根据.pro文件设置的项目代码路径进行扫描提取需要翻译的文本内容，接着会在TRANSLATIONS中设置的路径生成对应需要的语言版本，上述实例中给出了翻译为简体中文和繁体中文的路径。lrelease的使用后面继续讲。接下来讲解如何在Pycharm或者其他IDE中配置外部工具lupdate,方便我们的使用。


## 使用 Qt Linguist 进行翻译

使用 Qt Linguist 的步骤说明：

打开 Qt Linguist 应用程序。

通过“文件”菜单打开刚才生成的 .ts 文件（例如：translations/myapp_zh_CN.ts）。

在主界面中选择待翻译的条目，输入翻译内容。这里是需要自己配置翻译的内容的，因为不同的英文名称在不同领域的翻译不同，因此需要自己配置翻译。只需要对识别到的翻译内容一一翻译后选择勾选已经翻译即可。

保存翻译后，关闭 Qt Linguist。

完成翻译后，记得使用 lrelease 工具将更新后的 .ts 文件转换为 .qm 文件，以便在运行时加载使用。这就需要用到刚配置好的lrelease 外部工具进行更新。更新后的目录如下。